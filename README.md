# Telegram-CRM Интеграция

Мини-CRM система с интеграцией Telegram для управления проектами и оборудованием через чаты/топики Telegram.

## Описание проекта

Эта система позволяет:
- Автоматически создавать проект в CRM при создании нового чата/топика в Telegram
- Отслеживать оборудование, его статусы и количество
- Вести историю всех действий по проекту
- Отправлять уведомления в Telegram-чат при изменениях в CRM
- Открывать веб-интерфейс CRM прямо из Telegram через WebApp/WebView

## Структура проекта

```
telegram-crm/
├── config/             # Конфигурационные файлы
├── database/           # Миграции и схемы БД
├── src/
│   ├── bot/            # Код Telegram бота
│   ├── server/         # Бэкенд API
│   └── client/         # Веб-интерфейс (WebView)
├── project-context.json # Описание структуры проекта
└── README.md
```

## Технологический стек

- **Бэкенд**: Node.js с Express/Fastify
- **База данных**: SQLite (для MVP), возможен переход на PostgreSQL
- **Telegram Bot**: Telegraf или node-telegram-bot-api
- **Фронтенд**: Простой HTML+JS или React/Vue для WebView

## Развертывание на Glitch

Для развертывания проекта на Glitch следуйте этим инструкциям:

1. Зарегистрируйтесь на [Glitch](https://glitch.com/)
2. Нажмите кнопку "New Project" и выберите "Import from GitHub"
3. Введите URL вашего GitHub репозитория или загрузите проект вручную
4. После загрузки проекта, откройте терминал и выполните команду `npm run init-db` для инициализации базы данных
5. Обновите токен бота в файле `config/config.js`, если необходимо

После развертывания, ваш проект будет доступен по адресу `https://имя-проекта.glitch.me`.

## Основные функции

1. **Управление проектами**:
   - Создание проекта при создании чата/топика
   - Отслеживание статуса проекта
   - История изменений

2. **Управление оборудованием**:
   - Добавление позиций оборудования
   - Отслеживание статуса каждой позиции
   - Ожидаемые даты поставки

3. **Интеграция с Telegram**:
   - Автоматическое создание проектов при создании топиков
   - Уведомления о важных событиях
   - Кнопка для открытия WebView с CRM

4. **Веб-интерфейс**:
   - Просмотр деталей проекта
   - Управление оборудованием
   - Изменение статусов
   - Отправка email (опционально)

## Установка и запуск

1. Клонировать репозиторий
2. Установить зависимости: `npm install`
3. Настроить конфигурацию в файле `config/config.js`
4. Запустить сервер: `npm run start-server`
5. Запустить бота: `npm run start-bot`

## MVP (Минимально жизнеспособный продукт)

Первая версия будет включать:
- Базовую привязку чатов Telegram к проектам
- Таблицу оборудования с основными полями
- Простой лог действий
- Базовые уведомления в Telegram
- Простой WebView для просмотра и редактирования проекта

## Дальнейшее развитие

- Множественные опции для проектов
- Визуальный прогресс-бар для отслеживания этапов
- Автоматизированный импорт писем
- Система ролей и прав доступа
- Уведомления-напоминания при отсутствии активности
